<div
  class="page-container"
  style="
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
  "
>
  <nz-card nzTitle="Agregar Cita" style="width: 400px">
    <form nz-form>
      <!-- Fecha -->
      <nz-form-item>
        <nz-form-label [nzSpan]="6" nzFor="fecha">Fecha</nz-form-label>
        <nz-form-control [nzSpan]="18">
          <nz-date-picker
            [(ngModel)]="fecha"
            name="fecha"
            nzFormat="dd/MM/yyyy"
            nzPlaceHolder="Selecciona la fecha"
            style="width: 100%"
          ></nz-date-picker>
        </nz-form-control>
      </nz-form-item>

      <!-- Hora -->
      <nz-form-item>
        <nz-form-label [nzSpan]="6" nzFor="hora">Hora</nz-form-label>
        <nz-form-control [nzSpan]="18">
          <nz-time-picker
            [(ngModel)]="hora"
            name="hora"
            nzFormat="HH:mm"
            nzPlaceHolder="Selecciona la hora"
            style="width: 100%"
          ></nz-time-picker>
        </nz-form-control>
      </nz-form-item>

      <!-- Cliente -->
      <nz-form-item>
        <nz-form-label [nzSpan]="6" nzFor="cliente">Cliente</nz-form-label>
        <nz-form-control [nzSpan]="18">
          <nz-select
            [(ngModel)]="clienteId"
            name="clienteId"
            nzPlaceHolder="Selecciona un cliente"
            style="width: 100%"
          >
            <nz-option
              *ngFor="let cliente of clientes"
              [nzValue]="cliente.id"
              [nzLabel]="cliente.nombres"
            ></nz-option>
          </nz-select>
        </nz-form-control>
      </nz-form-item>

      <!-- Seleccionar Atención y botón + -->
      <nz-form-item>
        <nz-form-control [nzSpan]="24" style="display: flex; gap: 8px">
          <nz-select
            [(ngModel)]="atencionId"
            name="atencionId"
            nzPlaceHolder="Selecciona una atención"
            style="flex: 1"
          >
            <nz-option
              *ngFor="let a of atenciones"
              [nzValue]="a.id"
              [nzLabel]="a.nombre"
            ></nz-option>
          </nz-select>
          <button
            nz-button
            nzType="dashed"
            type="button"
            (click)="agregarDetalle()"
          >
            +
          </button>
        </nz-form-control>
      </nz-form-item>

      <!-- Tabla de detalles -->
      <nz-table
        *ngIf="detalles.length > 0"
        [nzBordered]="true"
        [nzData]="detalles"
      >
        <thead>
          <tr>
            <th>Atención</th>
            <th>Precio</th>
            <th>Acciones</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let d of detalles; let i = index">
            <td>{{ d.nombre }}</td>
            <td>{{ d.precio }}</td>
            <td>
              <button
                nz-button
                nzType="default"
                nzSize="small"
                (click)="eliminarDetalle(i)"
              >
                Eliminar
              </button>
            </td>
          </tr>
        </tbody>
      </nz-table>

      <!-- Botón Guardar -->
      <div style="text-align: center; margin-top: 16px">
        <button nz-button nzType="primary" (click)="save()">Guardar</button>
      </div>
    </form>
  </nz-card>
</div>
