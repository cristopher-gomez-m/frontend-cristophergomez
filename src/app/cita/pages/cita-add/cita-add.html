<div class="page-container">
  <nz-card nzTitle="Agregar Cita" class="cita-card">
    <form nz-form>
      <!-- Fecha -->
      <nz-form-item>
        <nz-form-label [nzSpan]="6" nzFor="fecha">Fecha</nz-form-label>
        <nz-form-control [nzSpan]="18">
          <nz-date-picker
            [(ngModel)]="fecha"
            name="fecha"
            nzFormat="dd/MM/yyyy"
            nzPlaceHolder="Selecciona la fecha"
            class="full-width"
          ></nz-date-picker>
        </nz-form-control>
      </nz-form-item>

      <!-- Hora -->
      <nz-form-item>
        <nz-form-label [nzSpan]="6" nzFor="hora">Hora</nz-form-label>
        <nz-form-control [nzSpan]="18">
          <nz-time-picker
            [(ngModel)]="hora"
            name="hora"
            nzFormat="HH:mm"
            nzPlaceHolder="Selecciona la hora"
            class="full-width"
          ></nz-time-picker>
        </nz-form-control>
      </nz-form-item>

      <!-- Cliente -->
      <nz-form-item>
        <nz-form-label [nzSpan]="6" nzFor="cliente">Cliente</nz-form-label>
        <nz-form-control [nzSpan]="18">
          <nz-select
            [(ngModel)]="clienteId"
            name="clienteId"
            nzPlaceHolder="Selecciona un cliente"
            class="full-width"
          >
            <nz-option
              *ngFor="let cliente of clientes"
              [nzValue]="cliente.id"
              [nzLabel]="cliente.nombres"
            ></nz-option>
          </nz-select>
        </nz-form-control>
      </nz-form-item>

      <!-- Seleccionar Atenci贸n -->
      <nz-form-item>
        <nz-form-control [nzSpan]="24" class="atencion-row">
          <nz-select
            [(ngModel)]="atencionId"
            name="atencionId"
            nzPlaceHolder="Selecciona una atenci贸n"
            class="atencion-select"
          >
            <nz-option
              *ngFor="let a of atenciones"
              [nzValue]="a.id"
              [nzLabel]="a.nombre"
            ></nz-option>
          </nz-select>
          <button nz-button nzType="dashed" type="button" (click)="agregarDetalle()">+</button>
        </nz-form-control>
      </nz-form-item>

      <!-- Tabla de detalles -->
      <nz-table
        *ngIf="detalles.length > 0"
        [nzBordered]="true"
        [nzData]="detalles"
      >
        <thead>
          <tr>
            <th>Atenci贸n</th>
            <th>Precio</th>
            <th>Acciones</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let d of detalles; let i = index">
            <td>{{ d.nombre }}</td>
            <td>{{ d.precio }}</td>
            <td>
              <button
                nz-button
                nzType="default"
                nzSize="small"
                (click)="eliminarDetalle(i)"
              >
                Eliminar
              </button>
            </td>
          </tr>
        </tbody>
      </nz-table>

      <!-- Bot贸n Guardar -->
      <div class="btn-guardar-container">
        <button nz-button nzType="primary" (click)="save()">Guardar</button>
      </div>
    </form>
  </nz-card>
</div>
